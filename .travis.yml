sudo: false
language: node_js
node_js:
- node
addons:
  apt:
    sources:
    - ubuntu-toolchain-r-test
    packages:
    - g++-4.8
    - gcc-4.8-multilib
    - g++-4.8-multilib
    - gcc-multilib
    - g++-multilib
os:
- osx
- linux
before_deploy:
- ARCHIVE_NAME="${TRAVIS_TAG:-latest}-$TRAVIS_OS_NAME-`uname -m`.tar"
- npm run prebuild
- if [[ "$TRAVIS_OS_NAME" == "linux" ]]; then ARCH=ia32 npm run prebuild; fi
- tar --create --verbose --file="$ARCHIVE_NAME" --directory "$TRAVIS_BUILD_DIR/prebuilds"
  .
deploy:
  provider: releases
  draft: false
  prerelease: true
  file: "$ARCHIVE_NAME"
  skip_cleanup: true
  on:
    tags: true
    node: node
  api_key:
    secure: NgWRiAPEQ8dW5UpqVsKZ2NY1uT2rsLx5HAj22Ofcu4Xs2t4RyB6bmXyxqNlLm4oSD1DoEVmaS9E9YfmxkiOS+P1EQy1mP1v+Q0u3V4b+HPdxo7i2lneOSVuOA107TSmgaD5cNDcAaEOtQz1moxZ11zk0gYiQCVR7Fw8U+3eM9g491n85opGEgHbuIm6d2c8sPDF8H5LmRzH7XdO2KQuFJGJReQ9HEeufMhN7pmUGNwyU9DQu0boyx/tkT5XjyIlbWYT32Wf7PPbUBSh5/M70RiGaNjjf47Zs80qFLnIk8pqveJwyVhQc0pnqLKYr8NKDNmlQecJgeLjA0bgcqjZJMfHoSdFsP9zFvNk+ZQivZ5BpPPFJBQix8nPNc1rnyvzh8Bs9N7Y6ZiS1xk1K+Iw5chuVo1dG6DnLQpDI0v1vBMTX3WaeWAxSOdU8hpl6fDwvgK+6pp2rdnRcvWB07JI0gZiRqqnGPT/Q4RlAWGyfXrsN+0D4+e/X6QBnkgRX8x5juImMmVmfVZrXVjRBfnHJI+UPtuYH7FmpA9rU7MT9AAwOvLocoFj/TWa5jbtoy0EWrJYGnpOliuKePcqPOpiWMq9jE2oRX3RQorvhXdZPSvFcPnJN8aj2zbjLSUWm32HSQW5w/Ylx+u1HqKtRaqJ/J6fYLEA8v2r0ocPlKpRBpRQ=
